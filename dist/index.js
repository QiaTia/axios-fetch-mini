class e{handlers=[];use(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1}eject(e){this.handlers[e]&&this.handlers.splice(e,1)}forEach(e){this.handlers.forEach(e)}}const t=(e="")=>/(http|https):\/\/([\w.]+\/?)\S*/.test(e);async function s(e){const s={...e,url:t(e.url)?e.url:`${e.baseUrl||""}${e.url||""}`};if("{}"!==JSON.stringify(e.params)){const t=function(e){return Object.keys(e).filter((t=>null!=e[t])).map((t=>`${t}=${e[t]}`)).join("&")}(e.params);s.url+=-1===s.url.indexOf("?")?`?${t}`:`&${t}`}const r=await window.fetch(s.url,s),a=r.headers.get("content-type");return r.config=e,a?.includes("json")?r.data=await r.json():r.data=await r.text(),r}class r{defaults={url:"",baseUrl:"",header:{"content-type":"application/json;charset=UTF-8"},method:"GET",dataType:"json",responseType:"text",custom:{},timeout:6e4};interceptors;constructor(t={}){this.defaults={...this.defaults,...t},this.interceptors={request:new e,response:new e}}static mergeConfig(e,t){return e.baseUrl=t.baseUrl,e.responseType=e.responseType||t.responseType,e.timeout=e.timeout||t.timeout,e.url=e.url||"",e.data=e.data||{},e.params=e.params||{},e.header=e.header||t.header,e.method=e.method||t.method,e.custom={...t.custom,...e.custom||{}},e}create(e){return new r(e)}request(e,t){"string"==typeof e?(t=t||{url:""}).url=e:t=e||this.defaults,t=r.mergeConfig(t,this.defaults);const a=[s,void 0];this.interceptors.response.forEach((({fulfilled:e,rejected:t})=>{a.push(e,t)})),this.interceptors.request.forEach((({fulfilled:e,rejected:t})=>{a.unshift(e,t)}));let n=Promise.resolve(t);for(;a.length;)n=n.then(a.shift(),a.shift());return n}get(e,t={},s={}){return this.request({...s,params:t,url:e,method:"GET"})}post(e,t={},s={}){return this.request({...s,data:t,url:e,method:"POST"})}put(e,t={},s={}){return this.request({...s,data:t,url:e,method:"PUT"})}delete(e,t={},s={}){return this.request({...s,data:t,url:e,method:"DELETE"})}down(e,t={},s={}){return this.request({...s,data:t,url:e,method:"DOWN"})}}const a=new r;window&&!window.axios&&(window.axios=a);export{a as default};
